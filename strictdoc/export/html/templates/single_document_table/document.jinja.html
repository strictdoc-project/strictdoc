<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="{{document.meta.get_root_path_prefix()}}/_static/global.css" />
  <link rel="stylesheet" href="{{document.meta.get_root_path_prefix()}}/_static/layout-main-with-toc.css" />
  <!-- <link rel="stylesheet" href="{{document.meta.get_root_path_prefix()}}/_static/single_document_table.css" /> -->
  <script type="text/javascript" src="{{document.meta.get_root_path_prefix()}}/_static/toc.js"></script>
  <title>{{document.name}} - Table</title>
</head>

<body>

  {%- set document_iterator = traceability_index.get_document_iterator(document) -%}

  <div id="toc_layout" class="layout-with-toc">

  <aside class="toc">
    {% include "_shared/table_of_contents.jinja.html" %}
  </aside>

  <main class="content">
    <h1 class="document-title">{{document.name}} <span class="document-view-type">Table</span></h1>

    {%- if traceability_index.has_tags(document) -%}
      <div id="tags-outline">
      {%- for tag in traceability_index.get_tags(document) %}
        <span class="tag">
          {{ tag[0] }} x {{ tag[1] }}
        </span>
      {%- endfor %}
      </div>
    {%- endif %}

    <article class="view-table" id="sections-and-requirements">

      {%- if document.free_texts -%}
        <section>
        {%- for free_text in document.free_texts -%}
          <div class="free_text">
            {{ renderer.render_free_text(free_text) }}
          </div>
        {%- endfor -%}
        </section>
      {%- endif -%}


    {%- for section_or_requirement in document_iterator.all_content() %}
        {%- if section_or_requirement.is_composite_requirement %}

          <section class="view-table_composite" id="{{ string_to_anchor_id(section_or_requirement.title) }}">
            {%- set section = section_or_requirement %}
            <h{{ section.ng_level }} class="section-title" data-level="{{ section.export_title }}">
              {{ section.title }}
            </h{{ section.ng_level }}>

          {%- set requirement = section_or_requirement %}
          {% with requirement_view_type='table' -%}
            {% include "_shared/requirement.jinja.html" %}
          {%- endwith %}

        </section>

        {%- elif section_or_requirement.is_requirement %}

        <section class="view-table_requirement" id="{{ string_to_anchor_id(section_or_requirement.title) }}">
          {%- set requirement = section_or_requirement %}
          {% with requirement_view_type='table' -%}
            {% include "_shared/requirement.jinja.html" %}
          {%- endwith %}
        </section>

        {%- elif section_or_requirement.is_section %}

        <section class="view-table_section" id="{{ string_to_anchor_id(section_or_requirement.title) }}">
          {%- set section = section_or_requirement %}
          <h{{ section.ng_level }} class="section-title" data-level="{{ section.export_title }}">
            {{ section.title }}
          </h{{ section.ng_level }}>
          {%- for free_text in section_or_requirement.free_texts %}
            <div class="free_text">
            {{ renderer.render_free_text(free_text) }}
            </div>
          {%- endfor -%}
        </section>
        {%- endif %}

    {%- endfor %}
    </article>

  </main>

  </div>
</body>
