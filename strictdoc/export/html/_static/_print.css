/* general styles */

.pdf-view {
  --print-A4-width: 210mm;
  --print-A4-height: 297mm;
  --print-font-size: 12pt;
  /* vitual */
  --vitual-pages-elevation-shadow: rgba(0, 0, 0, 0.1) 2px 2px 12px 0px;
  --vitual-pages-divider: 1rem;

  /*
  ! in @page CCS variables don't work!
  ! when changing print-padding parameters
  ! do not forget to change the corresponding margins in @page
  */
  --print-padding: 25mm;
  --print-top-padding: 12mm;
  --print-bottom-padding: 15mm;

  /* calculated */
  --printing-width: calc(var(--print-A4-width) - var(--print-padding) * 2);
}

.pdf-view .content {
  display: block;
}

.pdf-view .printable_flow {
  margin: 0 auto;
  font-size: var(--print-font-size);
  width: var(--printing-width);
}

/* TODO margins to padding in ALL styles, so that the height of the element is defined correctly */
/* adding a workaround for this case for now */
.pdf-view .printable_flow * {
  margin-top: 0;
  margin-bottom: 0;
}

/* frontpage */

.frontpage {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: minmax(min-content, max-content) 1fr minmax(min-content, max-content);
  grid-template-areas:
    "header header header"
    "content content content"
    "footer footer footer";
  place-items: stretch stretch;
  place-content: stretch stretch;

  /* We want the 'frontpage' content to take up all available heights,
  excluding the footer and header heights. */
  height: 100%;

  /* elevate above the virtual page */
  position: relative;

  /* ! temp */
  background-color: rgba(0, 0, 0, 0.01);
}

/* running */

.running-header {
  display: flex;
  justify-content: center;
  align-items: center;

  padding-bottom: .5rem;

  /* elevate above the virtual page */
  position: relative;

  /* ! temp */
  background-color: rgba(0, 0, 0, 0.02);
}

.running-footer {
  break-after: page;

  display: flex;
  justify-content: center;
  align-items: center;

  padding-top: .5rem;

  /* elevate above the virtual page */
  position: relative;

  /* ! temp */
  background-color: rgba(0, 0, 0, 0.02);
}

/* print service */
.break-after-page { break-after: page; }

/*
  Virtual elements for preview in browser,
  are used only to calculate the simulation page template.
*/
.virtualA4 {
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: minmax(min-content, max-content)
                      1fr
                      minmax(min-content, max-content);
  place-items: stretch stretch;
  place-content: stretch stretch;

  /* height: var(--print-A4-height); */
  /*
    Based on the height of the middle grid row
    we calculate the height of the printable area for the rest of the pages.
    We want the 'frontpage' content to take up all available heights,
    excluding the footer and header heights.
    By adding the height of the virtualA4_pages_divider to the height of the virtualA4,
    we compensate for the final height of the 'frontpage' content.
  */
  height: calc(var(--print-A4-height) + var(--vitual-pages-divider));
}
.virtualA4_page {
  position: relative;
  height: 0;
}
.virtualA4_page::before {
  position: absolute;
  content: '';
  width: var(--print-A4-width);
  height: var(--print-A4-height);
  left: calc(var(--print-padding)*(-1));
  background-color: #fff;
  box-shadow: var(--vitual-pages-elevation-shadow);
}
.virtualA4_page_top_padding {
  position: relative;
  padding-top: var(--print-top-padding);
}
.virtualA4_page_bottom_padding {
  position: relative;
  padding-top: var(--print-bottom-padding);
}

.virtualA4_pages_divider {
  position: relative;
  padding-top: var(--vitual-pages-divider);
  background-color: rgba(255, 0, 0, 0.1);
}

/*
 * print styles
   should be after general styles
 */

@media print {

  .pdf-view aside,
  .pdf-view header,
  .pdf-view nav,
  .pdf-view .layout_button {
    display: none ;
  }

  .pdf-view  main,
  .pdf-view  .layout {
    display: contents;
  }

  /* .pdf-view .frontpage, */
  .pdf-view .content {
    padding: 0;
    display: contents;
  }

  .virtualA4 {
    display: contents;
  }

  .virtualA4_page,
  .virtualA4_page_top_padding,
  .virtualA4_page_bottom_padding,
  .virtualA4_pages_divider {
    display: none;
  }

}

@page {
  size: A4;
  /* var don't work in @page */
  /* ~ 0,64" */
  /* should be synchronized width
  --print-padding: 25mm;
  --print-top-padding: 12mm;
  --print-bottom-padding: 15mm;
  */

  /*
  make left & right margin slightly smaller than the SSA variables.
  To keep the width from overflowing when printing.
  */
  margin-left: 20mm;   /* --print-padding: 25mm; */
  margin-right: 20mm;  /* --print-padding: 25mm; */
  margin-top: 12mm;    /* --print-top-padding: 12mm; */
  margin-bottom: 12mm; /* --print-bottom-padding: 15mm; */
}
