{% extends "base.jinja.html" %}
{% block title %}Traceability{% endblock %}
{% block viewtype %}traceability-view{% endblock %}

{% block content %}

      {% include "_shared/tags.jinja.html" %}

      <div class="content">
      {%- for section_or_requirement in document_iterator.all_content() %}

        {%- if section_or_requirement.is_requirement %}
        <section class="content_section">
          <div class="content_item" data-role="parents">
          {%- for requirement in traceability_index.get_parent_requirements(section_or_requirement) %}

            {% with requirement_view_type='card' -%}
            {% include "_shared/requirement.jinja.html" %}
            {%- endwith %}

          {%- endfor -%}
          </div>

          <div class="content_item" data-role="current" id="{{ link_renderer.render(section_or_requirement) }}">
            {%- set requirement = section_or_requirement %}

            {% with requirement_view_type='card' -%}
            {% include "_shared/requirement.jinja.html" %}
            {%- endwith -%}

          </div>
          <div class="content_item" data-role="children">
          {%- for requirement in traceability_index.get_children_requirements(section_or_requirement) %}

            {% with requirement_view_type='card' -%}
            {% include "_shared/requirement.jinja.html" %}
            {%- endwith %}

          {%- endfor -%}
          </div>
        </section>

        {%- elif section_or_requirement.is_section %}
        <section class="content_section">

          <div class="content_item" data-role="parents"></div>
          <div class="content_item" data-role="current" id="{{ link_renderer.render(section_or_requirement) }}">

            {%- set section = section_or_requirement %}
            {% include "_shared/docsection.jinja.html" %}
          </div>
          <div class="content_item" data-role="children"></div>
        </section>
        {%- endif %}

      {%- endfor %}
      </div>

{% endblock content %}
