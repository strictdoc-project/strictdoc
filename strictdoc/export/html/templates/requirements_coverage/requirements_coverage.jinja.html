{% extends "base.jinja.html" %}
{% set template_type = "Requirements coverage" %}

{% block head_css %}
  {{ super() }}
  <link rel="stylesheet" href="{{link_renderer.render_static_url('_requirement-tree.css')}}"/>
{% endblock head_css %}

{% block head_scripts %}
  {{ super() }}
  <script type="text/javascript" src="{{link_renderer.render_static_url('pan_with_space.js')}}"></script>
  <script type="text/javascript" src="{{link_renderer.render_static_url('requirements-coverage.js')}}"></script>
{% endblock head_scripts %}

{% block title %}
  {{ config.project_title }} - {{template_type}}
{% endblock title %}

{% block viewtype %}requirements-coverage{% endblock %}

{% block layout_nav %}
  {% include "_shared/nav.jinja.html" %}
{% endblock layout_nav %}

{% block toc_content %}
  {% include "requirements_coverage/document_list.jinja.html" %}
{% endblock toc_content %}

{% block header_content %}
  {% include "_shared/header.jinja.html" %}
{% endblock header_content %}

{% block content %}

  {%- for document in traceability_index.document_tree.document_list -%}
      <h3 class="requirements-coverage-document-title" id="{{loop.index}}">{{document.title}}</h3>
      {%- set document_iterator = traceability_index.get_document_iterator(document) -%}
      <div class="content">
      {%- for section_or_requirement in document_iterator.all_content() %}

        {%- if section_or_requirement.is_requirement %}
        <section class="content_section">

          {%- set requirement = section_or_requirement %}
          <div class="content_item" data-role="current">
            {%- with anchor=link_renderer.render_local_anchor(section_or_requirement) -%}
            {% include "requirements_coverage/requirement.jinja.html" %}
            {%- endwith -%}
          </div>

          <div class="content_item" data-role="children">
          {%- with requirement=section_or_requirement, requirement_partial="requirements_coverage/requirement.jinja.html" -%}
            {% include "_shared/requirement_tree_right.jinja.html" %}
          {%- endwith -%}
          </div>

        </section>
        {%- endif %}
      {%- endfor %}
      </div>
  {%- endfor %}

{% endblock content %}
