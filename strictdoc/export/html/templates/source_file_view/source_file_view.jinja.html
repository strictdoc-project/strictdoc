<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon" />
    <link rel="icon" href="../../favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../../_static/_base.css" />
    {# <link rel="stylesheet" href="_static/document_tree.css"/> #}
    <link rel="stylesheet" href="../../_static/_source.css" />
    {# <link rel="stylesheet" href="../../_static/_element.css" /> #}
    <title>source-file-view</title>
  </head>

  <style>
    {{pygments_styles | safe}}
  </style>

  <body>
    <main class="source-file-view">

      <div class="source-file__refer">
        <div class="source-file__path">
          {{source_file.in_doctree_source_file_rel_path}}
        </div>

        {# requirements #}
        {%- set source_file_requirement_links =
        traceability_index.get_source_file_requirement_links(source_file.in_doctree_source_file_rel_path) -%}
        {%- if source_file_requirement_links -%}
        <div class="source-file__reqs">
          <div>
            {# <h5> #}
              The following requirements refer to this source file:
            {# </h5> #}
          </div>
          {%- for requirement in source_file_requirement_links -%}
          <article id="{{ requirement.uid }}" class="requirement">
            <a href="{{ link_renderer.render_requirement_link_from_source_file(requirement, source_file) }}">
              {%- if requirement.uid %}
              <span class="requirement_child-uid">{{ requirement.uid }}</span>
              {%- endif %}
              {{ requirement.title }}
            </a>
          </article>
          {%- endfor -%}
        </div>
        {%- endif -%}

        {# ranges #}
        {%- set source_file_range_reqs =
        traceability_index.get_source_file_all_range_reqs(source_file.in_doctree_source_file_rel_path) -%}
        {%- if source_file_range_reqs -%}
        <div class="source-file__ranges">
          <div>
            {# <h5> #}
              The following requirements refer <b>to the ranges</b> in this source file:
            {# </h5> #}
          </div>
          {%- for requirement in source_file_range_reqs -%}
          <article id="{{ requirement.uid }}" class="requirement">
            <a href="{{ link_renderer.render_requirement_link_from_source_file(requirement, source_file) }}">
              {%- if requirement.uid %}
              <span class="requirement_child-uid">{{ requirement.uid }}</span>
              {%- endif %}
              {{ requirement.title }}
            </a>
          </article>
          {%- endfor -%}
        </div>
        {%- endif -%}
      </div>

      <div class="source-file__code">
        <div id="source" class="source">
          {%- for line in source_file_content -%}
          {# <div class="source__req" id="line-{{loop.index}}">
          {%- set source_line_reqs =
          traceability_index.get_source_file_range_reqs(source_file.in_doctree_source_file_rel_path,
          loop.index) -%} {%- if source_line_reqs -%}
            <div class="test-requirement">
              {%- for requirement in source_line_reqs -%}
              <div>
                <a
                  href="{{ link_renderer.render_requirement_link_from_source_file(requirement, source_file) }}"
                >
                  {%- if requirement.uid %}
                  <span class="requirement_child-uid">{{ requirement.uid }} </span>
                  {%- endif %} {{ requirement.title }}
                </a>
              </div>
              {%- endfor -%}
            </div>
            {%- endif -%}
          </div> #}
          <div class="source__line-number"><pre>{{loop.index}}</pre></div>
          <div class="source__line-content">
            {%- if line != "" -%}
            {# <!-- Pygments --> #}
            <pre class="highlight">{{ line }}</pre>
            {%- else -%}
            <pre style="user-select: none">&nbsp;</pre>
            {%- endif -%}
          </div>
          {%- endfor -%}
        </div>
      </div>
    </main>
  </body>
</html>
